{"version":3,"sources":["utils/storeImage.js","components/EditNews.js"],"names":["setImageBuffer","file","a","fileObj","Buffer","Response","arrayBuffer","buffer","from","dataUrl","type","toString","NewContainer","styled","Container","font","general","DetailCol","Col","ApplyImage","div","image","NewsInput","Input","OuterTextArea","TextArea","textarea","NewsButton","CustomButton","Title","Lable","PalestherImage","img","AddNewsPost","navigate","useNavigate","id","useParams","dataService","DataService","fonts","useContext","ThemeContext","useState","newTitle","setNewsTitle","content","setContent","visibility","setNewsVisibility","error","status","setContentInfo","setError","contentList","setContentList","imageUrl","setImageUrl","setFiles","filesU","setFilesU","isLoading","setIsLoading","handleNewsUpdate","payload","console","log","updateNews","data","useEffect","fetchNews","undefined","getNews","title","description","url","global","updateUploadedFiles","files","length","md","sm","newsImage","placeholder","value","onChange","e","target","style","backgroundColor","accept","label","updateFilesCb","map","index","textAlign","icon","margin","color","height","onClick","list","filter","_","ind","rows","Simple_Validator","row","name","control","val","submit"],"mappings":"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","file":"static/js/8.3c12b11e.chunk.js","sourcesContent":["const setImageBuffer = async (file) => {\n  var fileObj = file\n  var buffer = Buffer.from(await new Response(fileObj).arrayBuffer())\n  var dataUrl = `data:${fileObj.type};base64,${buffer.toString(\"base64\")}`\n  return dataUrl\n};\n\nexport default setImageBuffer","/* eslint-disable no-unused-vars */\n/* eslint-disable react-hooks/exhaustive-deps */\nimport React, { useContext, useState, useEffect } from \"react\";\nimport {\n  Container,\n  Row,\n  Col,\n  Input,\n  Lable,\n  CustomButton,\n} from \"./CommonComponents\";\nimport styled from \"styled-components\";\nimport newsImage from \"../assets/News-cuate.svg\";\nimport { Icon } from \"@iconify/react\";\nimport { ThemeContext } from \"../contexts/ThemeContext\";\nimport { styled as muistyled } from \"@mui/material/styles\";\nimport FileUpload from \"./fileupload/FileUpload\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport setImageBuffer from \"../utils/storeImage\";\nimport Spinner from \"./Spinner\";\nimport { Simple_Validator } from \"../utils/validation\";\nimport Radio from \"@mui/material/Radio\";\nimport RadioGroup from \"@mui/material/RadioGroup\";\nimport FormControlLabel from \"@mui/material/FormControlLabel\";\nimport DataService from \"../services/DataService\";\n\n// const InputImage = muistyled(\"input\")({\n//   display: \"none\",\n// });\n\nconst NewContainer = styled(Container)`\n  display: flex;\n  flex-direction: column;\n  font-family: ${({ font }) => font.general};\n  padding-top: 25px;\n  @media (max-width: 600px) {\n    padding: 25px 20px;\n  }\n  /* justify-content: start; */\n  /* text-align: start; */\n`;\n\nconst DetailCol = styled(Col)``;\n\nconst ApplyImage = styled.div`\n  height: 80%;\n  width: 100%;\n  background-image: url(${({ image }) => image});\n  background-repeat: no-repeat;\n  background-size: cover;\n  margin: auto;\n\n  @media (min-width: 768px) {\n    height: 90%;\n    width: 100%;\n    margin-top: 30px;\n    margin-left: -50px;\n  }\n  @media (max-width: 768px) {\n    height: 300px;\n    width: 300px;\n    margin-top: -30px;\n  }\n`;\n\n// const Collection = styled.div`\n//   /* background-color: red; */\n//   display: flex;\n//   flex-direction: column;\n//   /* justify-content: center; */\n// `;\n\nconst NewsInput = styled(Input)`\n  width: 100%;\n  /* @media (max-width: 1040px) {\n    font-size: 13px;\n  } */\n`;\n\nconst OuterTextArea = styled.div`\n  display: flex;\n  flex-direction: row;\n  padding-bottom: 20px;\n`;\n\nconst TextArea = styled.textarea`\n  width: 100%;\n  border-radius: 5px;\n  border: 2px solid black;\n  padding: 5px;\n`;\n\nconst NewsButton = styled(CustomButton)`\n  margin: 25px 20px 30px 0;\n`;\n\nconst Title = styled(Lable)`\n  padding-top: 15px;\n`;\n\nconst PalestherImage = styled.img`\n  background-image: url(${({ image }) => image});\n  background-repeat: no-repeat;\n  background-size: cover;\n  width: 100px;\n  height: 100px;\n  margin-top: 10px;\n  border-radius: 10px;\n`;\n\nfunction AddNewsPost() {\n  let navigate = useNavigate();\n  const { id } = useParams();\n  const dataService = new DataService();\n\n  const { fonts } = useContext(ThemeContext);\n  // useS\n  const [newTitle, setNewsTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [visibility, setNewsVisibility] = useState(true);\n\n  const [contentInfo, setContentInfo] = useState({\n    error: null,\n    status: false,\n  });\n\n  const [error, setError] = useState(\"\");\n\n  const [contentList, setContentList] = useState([]);\n\n  const [imageUrl, setImageUrl] = useState(null);\n\n  const [files, setFiles] = useState([]);\n  const [filesU, setFilesU] = useState({});\n\n  const [isLoading, setIsLoading] = useState(false);\n\n  const handleNewsUpdate = async (payload) => {\n    console.log(\"payload\", payload);\n    const { status, data, error } = await dataService.updateNews(id, payload);\n    console.log(\"status\", status);\n    if (status) {\n      console.log(\"data\", data);\n      // navigate(`/admin/news/${data}`);\n    } else {\n      console.log(\"error\", error);\n      setError(error);\n    }\n  };\n\n  useEffect(() => {\n    setIsLoading(true);\n    const fetchNews = async () => {\n      if (id !== undefined && id !== null) {\n        console.log(\"Database Call\");\n        console.log(id);\n        const { status, data, error } = id\n          ? await dataService.getNews(id)\n          : null;\n        if (status) {\n          // setNewsData(data);\n          setNewsTitle(data.title);\n          setContentList(data.description);\n          setImageUrl(data.url);\n          setNewsVisibility(data.global);\n          setIsLoading(false);\n        }\n      } else {\n        setError(error);\n        navigate(\"/404\");\n      }\n    };\n    fetchNews();\n  }, []);\n\n  const updateUploadedFiles = async (files) => {\n    if (files.length !== 0) {\n      setFiles(files);\n      console.log(files[0]);\n      const dataUrl = await setImageBuffer(files[0]);\n      setImageUrl(dataUrl);\n    }\n  };\n\n  return (\n    <>\n      {isLoading ? (\n        <Spinner />\n      ) : (\n        <>\n          {newTitle && (\n            <NewContainer font={fonts}>\n              <Row>\n                <Col md={5} sm={12}>\n                  <ApplyImage image={newsImage} />\n                </Col>\n                <DetailCol md={7} sm={12}>\n                  <Title>Title</Title>\n\n                  <NewsInput\n                    type=\"text\"\n                    placeholder=\"Enter News Title\"\n                    value={newTitle}\n                    onChange={(e) => {\n                      setNewsTitle(e.target.value);\n                      // setTitleInfo(Simple_Validator(e.target.value,\"Title\"));\n                    }}\n                  />\n                  <Title>Image</Title>\n                  <FileUpload\n                    style={{ backgroundColor: \"#ededed\" }}\n                    accept=\".jpg,.png,.jpeg\"\n                    label=\"News Image(s)\"\n                    files={filesU}\n                    setFiles={setFilesU}\n                    updateFilesCb={updateUploadedFiles}\n                  />\n                  {/* <ImageInput type=\"file\"/> */}\n                  {imageUrl && <PalestherImage image={imageUrl} />}\n                  <br />\n                  <Title>Description</Title>\n                  <ul>\n                    {contentList &&\n                      contentList.map((value, index) => (\n                        <li key={index} style={{ textAlign: \"justify\" }}>\n                          {value}{\" \"}\n                          <Icon\n                            icon=\"ic:round-cancel\"\n                            style={{ margin: \"auto 3px\" }}\n                            color=\"red\"\n                            height=\"30\"\n                            onClick={() => {\n                              let list = contentList.filter(\n                                (_, ind) => ind !== index\n                              );\n                              setContentList(list);\n                            }}\n                          />\n                        </li>\n                      ))}\n                  </ul>\n                  <OuterTextArea>\n                    <TextArea\n                      rows=\"4\"\n                      value={content}\n                      placeholder=\"Enter Description\"\n                      onChange={(e) => {\n                        setContent(e.target.value);\n                        setContentInfo(\n                          Simple_Validator(e.target.value, \"Description\")\n                        );\n                      }}\n                    />\n                    <Icon\n                      icon=\"akar-icons:circle-plus-fill\"\n                      height=\"34\"\n                      color=\"#001e62\"\n                      style={{ margin: \"auto 3px\" }}\n                      onClick={() => {\n                        if (content !== \"\") {\n                          let list = [...contentList, content];\n                          setContentList(list);\n                          setContent(\"\");\n                        }\n                      }}\n                    />\n                  </OuterTextArea>\n\n                  <Title>News Visibility</Title>\n                  <RadioGroup\n                    row\n                    aria-label=\"visibility\"\n                    value={visibility}\n                    name=\"row-radio-buttons-group\"\n                  >\n                    <FormControlLabel\n                      value=\"true\"\n                      control={<Radio />}\n                      label=\"Public\"\n                      onChange={(e) => {\n                        let val = e.target.value;\n                        setNewsVisibility(!!val);\n                      }}\n                    />\n                    <FormControlLabel\n                      value=\"false\"\n                      control={<Radio />}\n                      label=\"Private\"\n                      onChange={(e) => {\n                        let val = e.target.value;\n                        setNewsVisibility(!val);\n                      }}\n                    />\n                  </RadioGroup>\n                  <div style={{ textAlign: \"right\" }}>\n                    <NewsButton\n                      submit\n                      onClick={() => {\n                        console.log(\"update\");\n                        if (true) {\n                          handleNewsUpdate({\n                            title: newTitle,\n                            description: contentList,\n                            global: visibility,\n                            url: imageUrl,\n                          });\n                        }\n                      }}\n                    >\n                      Update\n                    </NewsButton>\n                  </div>\n                </DetailCol>\n              </Row>\n            </NewContainer>\n          )}\n        </>\n      )}\n    </>\n  );\n}\n\nexport default AddNewsPost;\n"],"sourceRoot":""}